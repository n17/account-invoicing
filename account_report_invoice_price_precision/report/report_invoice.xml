<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_invoice_document" inherit_id="account.report_invoice_document">
        <span t-field='line.price_unit' position="attributes">
            <attribute name="t-options">{'precision': 2}</attribute>
        </span>

        <span t-field='line.price_subtotal' position="attributes">
            <attribute name="t-options">{'widget': 'float', 'precision': 2}</attribute>
        </span>

        <span t-field='line.price_subtotal' position="after">
            <t t-esc="o.currency_id.symbol" />
        </span>

        <span t-field='o.amount_untaxed' position="attributes">
            <attribute name="t-options">{'widget': 'float', 'precision': 2}</attribute>
        </span>

        <span t-field='o.amount_untaxed' position="after">
            <t t-esc="o.currency_id.symbol" />
        </span>

        <span t-field='o.amount_total' position="attributes">
            <attribute name="t-options">{'widget': 'float', 'precision': 2}</attribute>
        </span>

        <span t-field='o.amount_total' position="after">
            <t t-esc="o.currency_id.symbol" />
        </span>

        <span t-field='o.amount_residual' position="attributes">
            <attribute name="t-options">{'widget': 'float', 'precision': 2}</attribute>
        </span>

        <span t-field='o.amount_residual' position="after">
            <t t-esc="o.currency_id.symbol" />
        </span>

        <span t-esc='current_subtotal' position="attributes">
            <attribute name="t-options">{'widget': 'float', 'precision': 2}</attribute>
        </span>

        <span t-esc='current_subtotal' position="after">
            <t t-esc="o.currency_id.symbol" />
        </span>

        <xpath
            expr="//t[@t-foreach='o.amount_by_group']//td[@class='text-right o_price_total'][1]/span"
            position="attributes"
        >
            <attribute name="t-options">{'widget': 'float', 'precision': 2}</attribute>
        </xpath>

        <xpath
            expr="//t[@t-foreach='o.amount_by_group']//td[@class='text-right o_price_total'][1]/span"
            position="after"
        >
            <t t-esc="o.currency_id.symbol" />
        </xpath>

        <xpath
            expr="//t[@t-foreach='o.amount_by_group']//t[@t-esc='amount_by_group[4]']"
            position="replace"
        >
            <t
                t-esc="'%.2f'% float(amount_by_group[4].replace(o.currency_id.symbol, ''))"
            />
            <t t-esc="o.currency_id.symbol" />
        </xpath>

        <xpath
            expr="//t[@t-foreach='o.amount_by_group']//t[@t-else='']//td[2]/span"
            position="replace"
        >
            <t
                t-esc="'%.2f'% float(amount_by_group[3].replace(o.currency_id.symbol, ''))"
            />
            <t t-esc="o.currency_id.symbol" />
        </xpath>
    </template>
</odoo>
